{% extends "base.html" %}
{% load static %}
{% load render_table from django_tables2 %}
{% load bootstrap4 %}
{% block page_content %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item active" aria-current="page">Sample <strong>{{ sample.name }}</strong> (Coru&ntilde;a code: <strong>{{ sample.coruna_code }}</strong>; CNAG barcode: <strong>{{ sample.barcode }}</strong>)</li>
  </ol>
</nav>
<p>
  <div class="row m-1">

    <div class="col-md-12">


      <div class="card mb-2">
        <div class="card-header">
          <h5 class="mb-0">
            <a data-toggle="collapse" href="#collapseClinicalData" role="button" aria-expanded="true" aria-controls="collapseClinicalData">
              Clinical Data
            </a>
          </h5>
        </div>
        <div class="collapse show" id="collapseClinicalData">
          <div class="card-body">
            {% autoescape off %}{% render_table clinical_table %}{% endautoescape %}
          </div>
        </div>
      </div>


      <div class="card mb-2">
        <div class="card-header">
          <h5 class="mb-0">
            <a data-toggle="collapse" href="#collapseAssembly" role="button" aria-expanded="true" aria-controls="collapseAssembly">
              Genome Assembly
            </a>
          </h5>
        </div>
        <div class="collapse show" id="collapseAssembly">
          {% if ass.image %}
          <img class="card-img-top" src="{{ ass.image.url }}" alt="{{ ass.assembly }}" style="max-width:500px;">
          {% endif %}
          <div class="card-body">
            <h5 class="card-title">{{ ass.assembly }}</h5>
            <p class="card-text">Sample {{ ass.sample.name }} was assembled with {{ ass.assembler }} into {{ ass.total_scaffolds }} scaffolds, {{ ass.circular_scaffolds }} of which are closed circles. More details can be found in the table below.
              Raw
              data such as the assembly FASTA and annotation files can be downloaded from the "Raw Data" box. The assembly can be browsed by clicking on the "Browse" link for each scaffold.</p>
          </div>
        </div>
      </div>


      <div class="card mb-2">
        <div class="card-header">
          <h5 class="mb-0">
            <a data-toggle="collapse" href="#collapse2" role="button" aria-expanded="true" aria-controls="collapse2">
              Antimicrobial Susceptibility
            </a>
          </h5>
        </div>
        <div class="collapse show" id="collapse2">
          <div class="card-body">
            {% render_table clsi_eucast_table %}
          </div>
        </div>
      </div>


      <div class="card mb-2">
        <div class="card-header">
          <h5 class="mb-0">
            <a data-toggle="collapse" href="#collapseRawData" role="button" aria-expanded="true" aria-controls="collapseRawData">
              Raw Data
            </a>
          </h5>
        </div>
        <div class="collapse show" id="collapseRawData">
          <div class="card-body">
            <ul>
              <li><a href="{% get_media_prefix %}{{df.assembly_fasta}}">{{df.assembly_fasta}}</a>
              <li><a href="{% get_media_prefix %}{{df.annotation_gff }}">{{df.annotation_gff}}</a>
              <li><a href="{% get_media_prefix %}{{df.annotation_protein_fasta}}">{{df.annotation_protein_fasta}}</a>
              <li><a href="{% get_media_prefix %}{{df.annotation_transcript_fasta}}">{{df.annotation_transcript_fasta}}</a>
            </ul>
          </div>
        </div>
      </div>


      <div class="card mb-2">
        <div class="card-header">
          <h5 class="mb-0">
            <a data-toggle="collapse" href="#collapseScaffoldData" role="button" aria-expanded="true" aria-controls="collapseScaffoldData">
              Assembly scaffolds
            </a>
          </h5>
        </div>
        <div class="collapse show" id="collapseScaffoldData">
          <div class="card-body">
            {% render_table scaffolds_table %}
          </div>
        </div>
      </div>


    </div>
  </div>
  {% endblock %}
